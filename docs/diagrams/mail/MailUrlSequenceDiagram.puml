@startuml
!include ../style.puml

box Logic LOGIC_COLOR_T1
participant ":Mail" as Mail LOGIC_COLOR
participant "thisJob:Job" as Job LOGIC_COLOR
participant "thisTemplate:Template" as Template LOGIC_COLOR
participant "**<<class>>**\nMail" as MailClass LOGIC_COLOR
end box
[-> Mail : constructMail()
activate Mail

Mail -> Job : getClientEmail()
activate Job
Job --> Mail : email
deactivate Job

Mail -> Template : getSubject()
activate Template
Template --> Mail : subject
deactivate Template

Mail -> Template : getBody()
activate Template
Template --> Mail : body
deactivate Template

Mail -> MailClass : urlEncode(subject)
activate MailClass
MailClass --> Mail : encodedSubject
deactivate MailClass

Mail -> MailClass : urlEncode(body)
activate MailClass
MailClass --> Mail : encodedBody
deactivate MailClass

[<--Mail : String.format("mailto:%s?subject=%s&body=%s", email, subject, body)
deactivate Mail
@enduml
